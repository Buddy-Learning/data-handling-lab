
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Grade 8 Algebra Playground</title>
  <style>
    :root{ --bg:#f7f9fb; --card:#fff; --accent:#4f46e5; --muted:#64748b; --success:#16a34a; --danger:#ef4444; }
    *{box-sizing:border-box}
    body{font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin:0; background:linear-gradient(180deg,var(--bg),#eef2ff); color:#0f172a}
    .wrap{max-width:980px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;gap:16px}
    h1{margin:0;font-size:1.4rem}
    p.lead{margin:6px 0 18px;color:var(--muted)}

    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
    .card{background:var(--card);border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.06);padding:18px}

    .controls{display:flex;gap:8px;flex-wrap:wrap}
    select,input[type=number],button{padding:10px 12px;border-radius:8px;border:1px solid #e6eef8;background:white}
    button{cursor:pointer;border:none}
    .btn{background:var(--accent);color:white}
    .btn.ghost{background:transparent;border:1px solid #e6eef8;color:var(--accent)}

    .equation{font-size:1.9rem;font-weight:700;letter-spacing:0.6px;margin:12px 0}
    .hint{color:var(--muted);font-size:0.95rem}

    .answerRow{display:flex;gap:8px;align-items:center}
    .answerRow input{width:120px;font-size:1.1rem}

    .result{margin-top:12px;padding:10px;border-radius:8px}
    .result.ok{background:rgba(16,185,129,0.06);color:var(--success);border:1px solid rgba(16,185,129,0.12)}
    .result.bad{background:rgba(239,68,68,0.06);color:var(--danger);border:1px solid rgba(239,68,68,0.12)}

    .steps{margin-top:12px;background:#fbfdff;padding:12px;border-radius:8px;border:1px dashed #e6eef8}

    .meta{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:12px}
    .meta .pill{background:#f1f5f9;padding:6px 10px;border-radius:999px;color:var(--muted);font-size:0.9rem}

    .history{max-height:220px;overflow:auto;margin-top:12px}
    .history li{padding:8px;border-radius:8px;margin-bottom:8px;background:#fbfdff;border:1px solid #eef2ff}

    footer{margin-top:16px;font-size:0.9rem;color:var(--muted)}

    @media (max-width:880px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <img src="https://uploads.onecompiler.io/434dtae6m/436ugq6bg/BUDDY_LEARNING-removebg-preview.png" alt="Buddy Learning Logo" style="height:48px;width:auto;border-radius:8px;">
      <div>
        <h1>Algebra Playground — Grade 8</h1>
        <p class="lead">Practice solving for <code>x</code> with instant feedback, step-by-step hints and a fun game mode.</p>
      </div>
    </header>

    <div class="grid" style="margin-top:18px">
      <div>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <strong>Mode</strong>
              <div class="hint">Choose difficulty and equation style</div>
            </div>
            <div class="controls">
              <label>
                <select id="difficulty">
                  <option value="easy">Easy — one-step (x + b = c)</option>
                  <option value="medium">Medium — two-step (ax + b = c)</option>
                  <option value="hard">Hard — negatives & fractions</option>
                  <option value="distribute">With distribution (a(x + b) = c)</option>
                  <option value="bothSides">Both sides (ax + b = cx + d)</option>
                </select>
              </label>
              <label>
                <select id="mode">
                  <option value="practice">Practice</option>
                  <option value="game">Game (60s)</option>
                </select>
              </label>
              <button id="newEq" class="btn">New</button>
            </div>
          </div>

          <div style="margin-top:16px">
            <div class="equation" id="equation">—</div>
            <div class="hint" id="equationHint">Press "New" to generate an equation.</div>

            <div class="answerRow" style="margin-top:12px">
              <label for="answer"><strong>Your x:</strong></label>
              <input id="answer" type="text" placeholder="Type value for x" aria-label="answer input">
              <button id="check" class="btn">Check</button>
              <button id="hintBtn" class="btn ghost">Show steps</button>
            </div>

            <div id="feedbackArea"></div>

            <div class="meta">
              <div class="pill">Score: <span id="score">0</span></div>
              <div class="pill">Solved: <span id="solvedCount">0</span></div>
              <div class="pill">Time left: <span id="timeLeft">—</span></div>
            </div>

            <div class="history card" style="margin-top:14px;padding:12px">
              <strong>Recent equations</strong>
              <ul id="history" class="history" aria-live="polite"></ul>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <strong>Teacher controls</strong>
          <p class="hint">You can preset how many questions or reset the scoreboard.</p>
          <div style="display:flex;gap:8px;margin-top:8px">
            <label><input id="autoNew" type="checkbox"> Auto-generate on correct answer</label>
            <button id="resetScore" class="btn ghost">Reset score</button>
          </div>
        </div>

      </div>

      <aside>
        <div class="card">
          <strong>Step-by-step</strong>
          <div id="steps" class="steps">Answer shows here when you request steps.</div>

          <div style="margin-top:12px">
            <strong>How it helps</strong>
            <ol>
              <li>Identify the equation type</li>
              <li>Undo addition/subtraction</li>
              <li>Undo multiplication/division</li>
              <li>Check the final answer by substitution</li>
            </ol>
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <strong>Quick tips</strong>
          <ul style="margin-top:8px;color:var(--muted)">
            <li>If you see <code>2x + 3 = 11</code> first subtract 3, then divide by 2.</li>
            <li>Watch signs: subtracting a negative adds.</li>
            <li>In game mode you get points for quick correct answers.</li>
          </ul>
        </div>

        <div class="card" style="margin-top:14px">
          <strong>Accessibility</strong>
          <p class="hint">All controls are keyboard accessible. Press Enter in the answer field to submit.</p>
        </div>
      </aside>
    </div>

    <footer class="card" style="margin-top:18px;text-align:center">
      Built for Grade 8 learners — tweak numbers & difficulty to match your classroom. Have fun!
    </footer>
  </div>

<script>
let currentEq = null;
let score = 0, solved = 0, timer = null, timeLeft = 0;

function gcd(a,b){return b ? gcd(b,a%b):a;}
function simplifyFrac(n,d){let g=gcd(n,d);return d===1?`${n}`:`${n/g}/${d/g}`;}

function newEquation(){
  let diff = document.getElementById("difficulty").value;
  let a=0,b=0,c=0,d=0,x=0,eq="",ans="",steps="";

  if(diff==="easy"){
    x = Math.floor(Math.random()*10)-5;
    b = Math.floor(Math.random()*10)-5;
    c = x + b;
    eq = `x + ${b} = ${c}`;
    ans = x;
    steps = `Subtract ${b} from both sides → x = ${c-b}`;
  }
  else if(diff==="medium"){
    a = Math.floor(Math.random()*8)+2;
    x = Math.floor(Math.random()*10)-5;
    b = Math.floor(Math.random()*10)-5;
    c = a*x + b;
    eq = `${a}x + ${b} = ${c}`;
    ans = simplifyFrac(c-b,a);
    steps = `Subtract ${b}: ${a}x = ${c-b}. Divide by ${a}: x = ${ans}`;
  }
  else if(diff==="hard"){
    a = Math.floor(Math.random()*10)-5; 
    if(a===0)a=2;
    x = Math.floor(Math.random()*10)-5;
    b = Math.floor(Math.random()*10)-5;
    c = a*x + b;
    eq = `${a}x + ${b} = ${c}`;
    ans = simplifyFrac(c-b,a);
    steps = `Subtract ${b}: ${a}x = ${c-b}. Divide by ${a}: x = ${ans}`;
  }
  else if(diff==="distribute"){
    a = Math.floor(Math.random()*5)+2;
    b = Math.floor(Math.random()*10)-5;
    x = Math.floor(Math.random()*10)-5;
    c = a*(x+b);
    eq = `${a}(x + ${b}) = ${c}`;
    ans = x;
    steps = `Expand: ${a}x + ${a*b} = ${c}. Then solve → x = ${ans}`;
  }
  else if(diff==="bothSides"){
    // ax + b = cx + d
    a = Math.floor(Math.random()*5)+1;  
    c = Math.floor(Math.random()*5)+1;  
    while(a===c){ c = Math.floor(Math.random()*5)+1; } // avoid no solution
    x = Math.floor(Math.random()*10)-5;
    b = Math.floor(Math.random()*10)-5;
    d = a*x + b - c*x;  // ensures x is a solution

    eq = `${a}x + ${b} = ${c}x + ${d}`;
    ans = x;
    steps = `Subtract ${c}x from both sides → ${(a-c)}x + ${b} = ${d}. 
             Subtract ${b} → ${(a-c)}x = ${d-b}. 
             Divide by ${a-c} → x = ${ans}`;
  }

  currentEq = {eq,ans,steps};
  document.getElementById("equation").innerText = eq;
  document.getElementById("equationHint").innerText = "Solve for x.";
  document.getElementById("steps").innerText = "Answer shows here when you request steps.";
  document.getElementById("answer").value="";
  document.getElementById("feedbackArea").innerHTML="";
}

function checkAnswer(){
  let guess = document.getElementById("answer").value.trim();
  if(!currentEq) return;
  let correct = currentEq.ans.toString();
  if(guess===correct){
    score+=10; solved++;
    showFeedback(true);
    if(document.getElementById("autoNew").checked) newEquation();
  } else {
    showFeedback(false,correct);
  }
  updateMeta();
}

function showFeedback(ok,correct){
  let fb=document.getElementById("feedbackArea");
  if(ok){
    fb.innerHTML=`<div class='result ok'>✅ Correct!</div>`;
    addHistory(currentEq.eq, currentEq.ans, true);
  } else {
    fb.innerHTML=`<div class='result bad'>❌ Try again. Correct x = ${correct}</div>`;
    addHistory(currentEq.eq, currentEq.ans, false);
  }
}

function addHistory(eq,ans,ok){
  let li=document.createElement("li");
  li.textContent=`${eq} → x=${ans} ${ok?"✓":"✗"}`;
  document.getElementById("history").prepend(li);
}

function updateMeta(){
  document.getElementById("score").innerText=score;
  document.getElementById("solvedCount").innerText=solved;
}

function showSteps(){
  if(currentEq)
    document.getElementById("steps").innerText=currentEq.steps;
}

function resetScore(){score=0;solved=0;updateMeta();}

function startGame(){
  timeLeft=60; updateTime();
  timer=setInterval(()=>{
    timeLeft--;updateTime();
    if(timeLeft<=0){clearInterval(timer);alert(`Game over! Score ${score}`)}
  },1000);
}
function updateTime(){document.getElementById("timeLeft").innerText=timeLeft;}

// events
document.getElementById("newEq").onclick=()=>{
  if(document.getElementById("mode").value==="game"){resetScore();startGame();}
  newEquation();
};
document.getElementById("check").onclick=checkAnswer;
document.getElementById("hintBtn").onclick=showSteps;
document.getElementById("resetScore").onclick=resetScore;
document.getElementById("answer").addEventListener("keydown",e=>{if(e.key==="Enter")checkAnswer();});
</script>
</body>
</html>
